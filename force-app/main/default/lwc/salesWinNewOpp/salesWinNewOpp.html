<template>
    <div class="main">

    <lightning-spinner size="small" if:true={loading}></lightning-spinner>
  
    <div class="flexColumn gap w100">

        <h2>Nova Oportunidade</h2>

        <div class="errMsg" if:true={msg}>
            {msg}
        </div>


        <lightning-record-edit-form object-api-name="Opportunity">
            
            <div class="custonFields">
                <lightning-input 
                    type="text" 
                    label="Nome da Oportunidade"
                    value={values.Name}
                    onchange={handleSelectValue}
                    data-key="Name"
                    required
                ></lightning-input>

                <lightning-combobox
                    label="Tabela de preÃ§os"
                    value={values.Pricebook2Id}
                    placeholder="Selecione"
                    options={pricebooks}
                    onchange={handleSelectValue}
                    data-key="Pricebook2Id"
                    required
                ></lightning-combobox>

                <lightning-input 
                    type="date" 
                    label="Data do Fechamento"
                    value={values.CloseDate}
                    onchange={handleSelectValue}
                    data-key="CloseDate"
                    required
                ></lightning-input>
            </div>
            
            <lightning-input-field 
                field-name="StageName" 
                value={values.StageName}
                data-key="StageName"
                onchange={handleSelectValue}
            ></lightning-input-field>

        </lightning-record-edit-form>


        <div class="flexRow justEnd w100">
            <lightning-button 
                variant="brand" 
                label="Salvar" onclick={saveOpp} 
                disabled={disableSave} 
            ></lightning-button>
        </div>

    </div>
    </div>
</template>