<template>


    <!-- <lightning-card  title="Produtos" icon-name="standard:products"> -->
        <div class="main relative">
            
            <lightning-spinner if:true={loading} size="x-small"></lightning-spinner>
            <lightning-input 
                type="text" 
                value={term} 
                placeholder="Pesquisar..." 
                variant="label-hidden" 
                onchange={handleInputChange} 
                onkeydown={handleKeyDown}>
            </lightning-input>

            <div class="boxResults" if:true={entrys}>
                <div class="results flexColumn gap5">
                    <template for:each={entrys} for:item="prod">
                        <div key={prod.Id} class="flexColumn w100 gap5 itemBusca" onclick={hanldleClickItem} data-id={prod.Id}>

                            <div class="flexRow gap5">

                                <img 
                                    src={prod.Product2.DisplayUrl} 
                                    alt={prod.Product2.Name} 
                                    class="image">
    
                                <div class="flexColumn gap5">
                                    <h2>
                                        {prod.Name}
                                    </h2>
                                    <div class="flexRow gap5">
                                        <span>R$</span>
                                        <span>
                                            <lightning-formatted-number
                                            class="ptotal"
                                            value={prod.UnitPrice}
                                            maximum-fraction-digits="2"
                                            minimum-fraction-digits="0"
                                            ></lightning-formatted-number>
                                        </span>
                                    </div>
                                </div>

                            </div>
                           
                        </div>
                    </template>
                </div>
            </div>

            <div class="flexColumn gap" if:true={myProducts}>
                <div class="flexRow gap5 justEnd grow alignCenter">
                   <lightning-button size="xx-small" icon-name="utility:delete" label="Limpar" variant="brand" onclick={deleteAllItens}></lightning-button>
                </div>

                <template for:each={myProducts} for:item="my">
                    <div class="flexRow gap myItem" key={my.Id}>
                        <div class="flexColumn alignCenter blockLines" >
                            <!-- <lightning-icon icon-name="standard:products" size="small"></lightning-icon>
                            <div class="line"></div> -->
                            <img 
                                src={my.Product2.DisplayUrl} 
                                alt={my.Product2.Name} 
                                class="image">

                        </div>
                        <div class="flexColumn grow infosLine">
                            <div class="flexRow gap4">
                                <div class="grow">
                                    <p class="brandh3"  onclick={handleEdit} data-id={my.Id} data-productid={my.Product2Id}>
                                        {my.Product2.Name}
                                    </p>
                                </div>
                                <lightning-icon icon-name="utility:delete" size="xx-small" data-id={my.Id} onclick={deleteItem}></lightning-icon>
                            </div>
                            <div class="flexColumn">
                                <div class="flexRow gap4">
                                    R$ <lightning-formatted-number
                                    value={my.UnitPrice}
                                    maximum-fraction-digits="2"
                                    minimum-fraction-digits="0"
                                    ></lightning-formatted-number>
                                    x {my.Quantity}
                                </div>
                                <div class="flexRow gap4 money">
                                    R$ <lightning-formatted-number
                                    value={my.TotalPrice}
                                    maximum-fraction-digits="2"
                                    minimum-fraction-digits="0"
                                    ></lightning-formatted-number>
                                </div>
                            </div>
                        </div>
                    </div>
                </template>
            </div>
            
            
        </div>
    <!-- </lightning-card> -->

   

</template>